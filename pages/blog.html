<!-- Main Content -->
<div class="container" style="max-width: 700px;">
    <h4 class="fw-bold">Blog</h4>

    <!-- <div class="card">
        <a href="/?p=1594">
          <img class="card-img-top" src="../uploads/2021/11/imgPostLearningRoad.jpg">
        </a>
      <div class="card-body">
        <a href="/?p=1594"><h4 class="card-title">Online Education Platform</h4></a>
        <p class="card-text">2021-11-14</p>
      </div>
    </div>

    <div class="card mt-3">
      <div class="row align-items-center">

          <div class="col-auto ml-0">
              <img src="../uploads/2021/11/imgPostLearningRoad.jpg"  style="width: auto; height: 4rem;">
          </div>
          
          <div class="col">
            <div class="row fw-bold">Online Education Platform</div>
              <div class="row fw-light small">2021-11-14</div>
          </div>
          
      </div>
    </div> -->

    <div class="btn-group mt-2" role="group">
        <input type="radio" class="btn-check" name="vbtn-radio" id="vbtn-radio1" autocomplete="off" checked onclick="filterArticles('all')">
        <label class="btn btn-outline-primary" for="vbtn-radio1">All</label>
        <input type="radio" class="btn-check" name="vbtn-radio" id="vbtn-radio2" autocomplete="off" onclick="filterArticles('projects')">
        <label class="btn btn-outline-primary" for="vbtn-radio2">Projects</label>
        <input type="radio" class="btn-check" name="vbtn-radio" id="vbtn-radio3" autocomplete="off" onclick="filterArticles('notes')">
        <label class="btn btn-outline-primary" for="vbtn-radio3">University Notes</label>
        <input type="radio" class="btn-check" name="vbtn-radio" id="vbtn-radio4" autocomplete="off" onclick="filterArticles('electronics')">
        <label class="btn btn-outline-primary" for="vbtn-radio4">Electronics</label>
        <input type="radio" class="btn-check" name="vbtn-radio" id="vbtn-radio5" autocomplete="off" onclick="filterArticles('articles')">
        <label class="btn btn-outline-primary" for="vbtn-radio5">Articles</label>
    
    </div>

    <ul id="article-list"></ul>

    <script>
        let allArticles = [];
        
        fetch("articles/articles.json")
          .then(res => {
            if (!res.ok) throw new Error("Network response was not ok");
            return res.json();
          })
          .then(data => {
            allArticles = data;
            renderArticles(allArticles); // show all on load
          })
          .catch(err => {
            document.getElementById("article-list").innerHTML =
              "<li class='text-danger'>Failed to load articles.</li>";
          });
        
        function renderArticles(articles) {
          const ul = document.getElementById("article-list");
          ul.innerHTML = "";
          
          // Group articles by year
          const articlesByYear = {};
          articles.forEach(article => {
            const year = article.date.split('-')[0];
            if (!articlesByYear[year]) {
              articlesByYear[year] = [];
            }
            articlesByYear[year].push(article);
          });
          
          // Sort years in descending order
          const sortedYears = Object.keys(articlesByYear).sort((a, b) => b - a);
          
          sortedYears.forEach(year => {
            // Create year heading
            const yearHeading = document.createElement("h4");
            yearHeading.textContent = year + ":";
            yearHeading.style.fontWeight = "bold";
            yearHeading.style.marginTop = "1rem";
            ul.appendChild(yearHeading);
            
            // Create year list
            const yearList = document.createElement("ul");
            yearList.style.listStyleType = "none";
            yearList.style.paddingLeft = "0";
            
            // Sort articles within year by date (newest first)
            articlesByYear[year].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            articlesByYear[year].forEach(article => {
              const li = document.createElement("li");
              const a = document.createElement("a");
              a.href = "javascript:void(0)";
              a.classList.add("text-black");
              a.style.textDecoration = "none";
              a.style.transition = "text-decoration 0.2s ease";
              a.addEventListener("mouseenter", function() {
                  this.style.textDecoration = "underline";
              });
              a.addEventListener("mouseleave", function() {
                  this.style.textDecoration = "none";
              });
              a.onclick = function() {
                loadSection("../articles/" + article.filename);
              };
              a.textContent = article.date + " - " + article.title;
              li.appendChild(a);
              yearList.appendChild(li);
            });
            
            ul.appendChild(yearList);
          });
        }
        
        function filterArticles(tag) {
          if (tag === "all") {
            renderArticles(allArticles);
          } else {
            const filtered = allArticles.filter(article =>
              article.tags && article.tags.includes(tag)
            );
            renderArticles(filtered);
          }
        }
        </script>
        
        

</div>